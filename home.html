<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .li {
            text-decoration: line-through
        }
    </style>


</head>
<body>
    <!--TO DO LIST 시간되면 저장까지-->

    <div>
        <!-- 할일 적고 버튼 클릭하면 등록-->
        <input type="text" id="t">
        <button id="add">Add</button>
    </div>


    <div id="d1">
        <!-- 버튼 누르면 체크된것들 삭제 -->
        <div>
            <button id="btn" class="btn">휴지통</button>
        </div>

        <!-- 체크박스에 체크하면 선 생김  -->
        <!-- 체크 빼면 선 없어짐 -->
    </div>

    <script>
        const t = document.getElementById("t");
        const add = document.getElementById("add");
        const d1 = document.getElementById("d1");     
        const btn = document.getElementById("btn");
        const c1 = document.getElementById("c1");
        const s = document.getElementById("s");

        
        add.addEventListener("click", function(){ // 할일 추가
            let d2 = document.createElement("div")
            d2.classList.add("d2")
            let i = document.createElement("input")
            i.type="checkbox"
            i.classList.add("c1")
            let v = document.createTextNode(t.value)
            let s = document.createElement("span")
            s.classList.add("s1")
            s.appendChild(v)
            d2.appendChild(i)
            d2.appendChild(s)
            d1.append(d2)
        })

        d1.addEventListener("click", function(){ // 체크박스, 선

            let ar = document.getElementsByClassName("c1")
            let ar1 = document.getElementsByClassName("s1")

            for(let i=0;i<ar.length;i++){
                if(ar[i].checked){
                    ar1[i].classList.add("li")
                } else {
                    ar1[i].classList.remove("li")
                }
            }
        })

        d1.addEventListener("click", function(e){
            let ar = document.getElementsByClassName("c1")
            let ar2 = document.getElementsByClassName("d2")
            if (e.target.classList.contains("btn")){
                for(let i=0;i<ar.length;i++){
                    if(ar[i].checked){
                        let del = document.createAttribute("data-del-num")
                        let iden = document.createAttribute("id")
                        del.value=i
                        iden.value=i
                        ar[i].setAttributeNode(del)
                        ar2[i].setAttributeNode(iden)
                        console.log(this.getAttribute("data-del-num"))
                        document.getElementById(this.getAttribute("data-del-num")).remove()
                    }
            }
            }
        })
        
        
        
        // btn.addEventListener("click", function(e){

            
        //     for(let i=0;i<ar.length;i++){
        //         if(ar[i].checked){
                    
        //         }
        //     }


           
        





        

    </script>

</body>
</html>